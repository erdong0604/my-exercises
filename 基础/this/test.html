<!--
 * @Description: 
 * @Author: erdong
 * @Date: 2020-04-25 18:16:04
 -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button onclick="handleClick()" id="btn">点击我</button>
    <script>
        // document.getElementById('btn').onclick=function() {
        //     console.log(this)
        // }
        // function handleClick() {
        //     console.log(this)
        // }
        // console.dir(handleClick)
        // var obj={
        //     a: 1,
        //     b: 2,
        //     c: 3
        // }
        // var o=Object.create(obj)
        // console.dir(o)
        // console.dir(Object)
        // function foo() {
        //     var a=111;


        // }
        // function bar() {
        //     console.log(1)
        // }
        // bar.call({a: 1})
        // foo()
        // console.log(this)
        // function foo() {

        // }
        // foo.bar=function() {
        //     console.log(this)
        // }
        // foo.bar()

        // function foo(el) {
        //     console.log(el,this.id);
        // }
        // var obj={
        //     id: "awesome"
        // };
        // var id='aa';
        // [1,2,3].forEach(foo,window);
        // var foo=1;

        // var value=1;

        // var foo={
        //     value: 2,
        //     bar: function() {
        //         return this.value;
        //     }
        // }

        // //示例1
        // console.log(foo.bar()); // 2
        // //示例2
        // console.log((foo.bar)()); // 2
        // //示例3
        // console.log((foo.bar=foo.bar)); // 1
        // //示例4
        // console.log((false||foo.bar)()); // 1
        // //示例5
        // console.log((foo.bar,foo.bar)); // 1
        // var foo={x: 10};

        // var bar={
        //     x: 20,
        //     test: function() {

        //         alert(this===bar); // true
        //         alert(this.x); // 20

        //         // this=foo; // 错误，任何时候不能改变this的值

        //         alert(this.x); // 如果不出错的话，应该是10，而不是20

        //     }

        // };
        // bar.test(); // true, 20

        // foo.test=bar.test;

        // // 不过，这里this依然不会是foo
        // // 尽管调用的是相同的function

        // foo.test(); // false, 10
        // var a=10;
        // this.b=20;
        // window.c=30;

        // console.log(this.a);
        // console.log(b);
        // console.log(this.c);
        // function foo() {
        //     console.log(this)
        // }
        // foo();
        // var obj={
        //     a: 1,
        //     bar: foo
        // }
        // obj.bar();
        // function foo() {
        //     "use strict";
        //     console.log(this===window); // false
        //     console.log(this===undefined); // true
        // }
        // foo();

        // function foo() {
        //     console.log(this===window); // false
        //     console.log(this===undefined); // true
        // }


        // (function() {
        //     "use strict";
        //     foo();
        // })()

        // var point={
        //     x: 0,
        //     y: 0,
        //     moveTo: function(x,y) {
        //         // 内部函数
        //         var moveX=function(x) {
        //             console.log(this===window); // true
        //             this.x=x;//this 绑定到了哪里？
        //         };
        //         moveX(x);
        //     }
        // };
        // point.moveTo(1,1);
        // point.x; //==>0 
        // point.y; //==>0 
        // console.log(x); //==>1 
        // console.log(y); //==>1
        // function foo() {
        //     function bar() {
        //         this.a=1;
        //         console.log(this===window);
        //     }
        //     bar()
        // }
        // foo();
        // console.log(a);
        // var a=1;
        // var obj={
        //     a: 2,
        //     foo: function() {
        //         console.log(this===obj); // false
        //         console.log(this===window); // true
        //         console.log(this.a); // 1
        //     }
        // }

        // var baz=obj.foo;
        // baz();

        // var a=1;
        // function foo() {
        //     console.log(this.a);
        // }
        // var obj1={
        //     a: 2
        // }
        // var obj2={
        //     a: 3
        // }
        // var obj3={
        //     a: 4
        // }
        // var bar=foo.bind(obj1);
        // bar();// 2
        // foo(); // 1
        // foo.call(obj2); // 3
        // foo.call(obj3); // 4
        // var a=1;
        // function Person() {
        //     this.a=2;  // this => p;
        // }
        // var p=new Person();
        // console.log(p.a); // 2
        // var a=1;
        // function foo() {
        //     console.log(this.a); // 1  this => window
        // }
        // var obj={
        //     a: 2
        // }
        // var bar=foo.bind(null);
        // bar();
        // var foo={
        //     bar: function() {
        //         console.log(this);
        //     }
        // };

        // foo.bar(); // foo
        // (foo.bar)(); // foo
        // console.log((foo.bar=foo.bar));
        // (foo.bar=foo.bar)(); // window
        // (false||foo.bar)();  // window
        // (foo.bar,foo.bar)();  // window
        // 第三版
        Function.prototype.call2=function(context) {
            var context=context||window;
            context.fn=this;

            var args=[];
            for(var i=1,len=arguments.length;i<len;i++) {
                args.push('arguments['+i+']');
            }

            var result=eval('context.fn('+args+')');

            delete context.fn
            return result;
        }
        var o={
            a: 1
        }
        function foo(a,b,c) {
            console.log(this)
            console.log(arguments)
        }
        foo.call2(o,1,2,3);
    </script>
</body>

</html>